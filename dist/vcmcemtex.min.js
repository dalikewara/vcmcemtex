!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).vcmcemtex=e()}}(function(){return function(){return function e(t,r,n){function a(i,l){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!l&&u)return u(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[i]={exports:{}};t[i][0].call(d.exports,function(e){return a(t[i][1][e]||e)},d,d.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}}()({1:[function(e,t,r){"use strict";const n=e("vcmpad"),a=e("vcmloop");t.exports=function(e,t){if(!e||"object"!=typeof e)throw new Error("Invalid first argument! Object required!");if(t&&"object"!=typeof t)throw new Error("Invalid second argument! Object required!");(t=t||"object"==typeof t?t:{}).enter=t.enter||!1,t.default=t.default||" ",t.charlen=Number(t.charlen)||160;let r={counts:{detail:{}},totalData:e.detail&&e.detail.data?e.detail.data.length:0};function o(e,t,r,a,o,i){return new Promise(l=>{e.countFromDetail&&(t=a.counts.detail[e.countFromDetail]||t),"lps"===e.type&&(t=n.left(r,t)),"lpz"===e.type&&(t=n.left(r,t,"0")),"rps"===e.type&&(t=n.right(r,t)),"rpz"===e.type&&(t=n.right(r,t,"0")),!0===e.removeDot&&(t=t.replace(/\./g,"")),!0===e.removeSpace&&(t=t.replace(/\s+/g,"")),!1===e.decimal&&(t=Number(t)||t),"detail"===i&&(a.counts.detail[o]=a.counts.detail[o]||0,a.counts.detail[o]+=Number(t)||0),l(t)})}return async function(){let i=await new Promise(i=>{if(!e.detail)return i("");if(!e.detail.keys||!e.detail.data)throw new Error("Invalid format! Detail object must contains key 'keys {}' and 'data []'!");var l=Object.keys(e.detail.keys),u=l.length,f=Array.isArray(e.detail.data)?e.detail.data.length:0;if(u<1)return i("");if(f<1)return i(n.right(t.charlen," "));if(f>25e4){var d=f,c=d/2,s=c%1,h=Math.floor(c),g=h,v=0===s?d-h:d-h-1,m=d,p=e.detail.data.slice(0,g),y=e.detail.data.slice(v,m),b=p.length,w=b/2,D=w%1,k=Math.floor(w),N=k,S=0===D?b-k:b-k-1,j=b,x=p.slice(0,N),O=p.slice(S,j),F=y.length,q=F/2,P=q%1,E=Math.floor(q),I=E,A=0===P?F-E:F-E-1,M=F,z=y.slice(0,I),U=y.slice(A,M);!async function(){function f(i){return new Promise(f=>{var d=i.length,c=0,s="";d<1&&f(""),a(0,d,a=>{for(var h=0,g=0,v="";h<u;h++){var m=l[h],p=e.detail.keys[l[h]].default||"",y=i[a][l[h]]||0===i[a][l[h]]?i[a][l[h]].toString():p,b=Number(e.detail.keys[l[h]].length)||0;b||""===y||(b=y.length),o(e.detail.keys[l[h]],y,b,r,m,"detail").then(e=>{v+=e,r.counts.detail[l[0]]=r.counts.detail[l[0]]||0,r.counts.detail[l[0]]+=Number(e)||0,u-1===g&&(v=(v=v&&""!==v?n.right(t.charlen,v):v)&&""!==v?v+"\n":v,d-1===c&&f(s+=v),c++),g++})}})})}let[d,c,s,h]=await Promise.all([f(x),f(O),f(z),f(U)]);i(d+c+s+h)}()}else{var _=e.detail.data.length,C=0,L="";_<1&&i(""),a(0,_,a=>{for(var f=0,d=0,c="";f<u;f++){var s=l[f],h=e.detail.keys[l[f]].default||"",g=e.detail.data[a][l[f]]||0===e.detail.data[a][l[f]]?e.detail.data[a][l[f]].toString():h,v=Number(e.detail.keys[l[f]].length)||0;v||""===g||(v=g.length),o(e.detail.keys[l[f]],g,v,r,s,"detail").then(e=>{c+=e,u-1===d&&(c=(c=c&&""!==c?n.right(t.charlen,c):c)&&""!==c?c+"\n":c,_-1===C&&i(L+=c),C++),d++})}})}}),l=await new Promise(a=>{if(!e.header)return a("");var i=Object.keys(e.header),l=i.length,u="",f=0,d=0;if(l<1)return a("");for(;f<l;f++){var c=i[f],s=e.header[i[f]].default||"",h=e.header[i[f]].value||0===e.header[i[f]].value?e.header[i[f]].value.toString():s;e.header[i[f]].countFromDetail&&(h=r.counts.detail[e.header[i[f]].countFromDetail].toString()),!0===e.header[i[f]].countAllData&&(h=r.totalData.toString());var g=Number(e.header[i[f]].length)||0;g||""===h||(g=h.length),o(e.header[i[f]],h,g,r,c,"header").then(e=>{u+=e,l-1===d&&a(u&&""!==u?n.right(t.charlen,u):u),d++})}}),u=await new Promise(a=>{if(!e.footer)return a("");var i=Object.keys(e.footer),l=i.length,u="",f=0,d=0;if(l<1)return a("");for(;f<l;f++){var c=i[f],s=e.footer[i[f]].default||"",h=e.footer[i[f]].value||0===e.footer[i[f]].value?e.footer[i[f]].value.toString():s;e.footer[i[f]].countFromDetail&&(h=r.counts.detail[e.footer[i[f]].countFromDetail].toString()),!0===e.footer[i[f]].countAllData&&(h=r.totalData.toString());var g=Number(e.footer[i[f]].length)||0;g||""===h||(g=h.length),o(e.footer[i[f]],h,g,r,c,"footer").then(e=>{u+=e,l-1===d&&a(u&&""!==u?n.right(t.charlen,u):u),d++})}});return(l=""!==l&&!0===t.enter?l+"\n":l)+i+(u=""!==u&&!0===t.enter?u+"\n":u)}()}},{vcmloop:2,vcmpad:3}],2:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,a){var o=setInterval(()=>{if(e<t)return r(e++);clearInterval(o),n&&n()},Number(a)||0)}},{}],3:[function(e,t,r){"use strict";r.left=function(e,t,r,n){t=t||0===t?t+"":"",r=r||0===r?String(r):" ",n="boolean"!=typeof n||n;var a=t.length;if(a==e)return t;if(a>e)return!0===n?t.slice(0,e):t.slice(a-e,a);var o=r.repeat(e-a)+t,i=o.length;return i>e&&!0===n?o.slice(0,e):o.slice(i-e,i)},r.right=function(e,t,r,n){t=t||0===t?t+"":"",r=r||0===r?String(r):" ",n="boolean"!=typeof n||n;var a=t.length;if(a==e)return t;if(a>e)return!0===n?t.slice(0,e):t.slice(a-e,a);var o=t+r.repeat(e-a),i=o.length;return i>e?!0===n?o.slice(0,e):o.slice(i-e,i):o.slice(0,e)}},{}]},{},[1])(1)});
